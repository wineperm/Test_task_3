# Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞–º–∏ (Nginx/Apache/HAProxy)

## üìã –ò—Å—Ö–æ–¥–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
**–£—Ä–æ–≤–µ–Ω—å:** Junior  
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** Docker ‚Ä¢ Docker Compose ‚Ä¢ Python ‚Ä¢ Nginx  

**–ó–∞–¥–∞—á–∞:**  
–°–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –¥–ª—è Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Flask), –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–µ–≥–æ "Hello, DevOps!", –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –∫–∞–∫ –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤—è–∑–∫—É —á–µ—Ä–µ–∑ Docker Compose.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. –ù–∞–ø–∏—Å–∞—Ç—å `Dockerfile` –¥–ª—è Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –°–æ–∑–¥–∞—Ç—å `docker-compose.yml` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
4. **–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `localhost:80`
   - –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ `stdout`
   - *(–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Apache –∏ HAProxy

---

## üöÄ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **3 –≤–∞—Ä–∏–∞–Ω—Ç–∞** —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
1. **–ë–∞–∑–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å Nginx** (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó)
2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å Apache**
3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å HAProxy**

### üîç –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
| –ö—Ä–∏—Ç–µ—Ä–∏–π               | Nginx | Apache | HAProxy |
|------------------------|-------|--------|---------|
| –î–æ—Å—Ç—É–ø –Ω–∞ –ø–æ—Ä—Ç—É 80     | ‚úÖ    | ‚úÖ     | ‚úÖ      |
| –õ–æ–≥–∏ –≤ stdout         | ‚úÖ    | ‚úÖ     | ‚úÖ      |
| –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ         | ‚úÖ    | ‚úÖ     | ‚úÖ      |
| –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏   | ‚Äî     | –ê–≤—Ç–æ–ø–æ–¥–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π | –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ |

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

.
‚îú‚îÄ‚îÄ apache_app/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Apache
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.py            # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile        # Dockerfile –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ apache/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile        # Dockerfile –¥–ª—è Apache
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ my-site.conf      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml    # Docker Compose –¥–ª—è Apache
‚îÇ
‚îú‚îÄ‚îÄ HAproxy_app/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å HAProxy
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.py            # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python (–≤–∫–ª—é—á–∞—è Gunicorn)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile        # Dockerfile —Å Gunicorn
‚îÇ   ‚îú‚îÄ‚îÄ haproxy/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ haproxy.cfg       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HAProxy
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml    # Docker Compose –¥–ª—è HAProxy
‚îÇ
‚îî‚îÄ‚îÄ nginx_app/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Nginx
    ‚îú‚îÄ‚îÄ app/
    ‚îÇ   ‚îú‚îÄ‚îÄ app.py            # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
    ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile        # Dockerfile –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ nginx/
    ‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
    ‚îî‚îÄ‚îÄ docker-compose.yml    # Docker Compose –¥–ª—è Nginx

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É 
**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `docker compose` (–±–µ–∑ –¥–µ—Ñ–∏—Å–∞)

### 1. –ë–∞–∑–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Nginx)
```bash
cd nginx_app && docker compose up --build
```
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost](http://localhost)

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# Apache
cd apache_app && docker compose up --build

# HAProxy 
cd HAproxy_app && docker compose up --build
```

---

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
```mermaid
sequenceDiagram
    participant User
    participant Proxy
    participant App

    User->>Proxy: GET /
    activate Proxy
    Proxy->>App: –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ—Ä—Ç 5000
    activate App
    App-->>Proxy: "Hello, DevOps!"
    deactivate App
    Proxy-->>User: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
    deactivate Proxy
```

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
### –î–ª—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
- **–ï–¥–∏–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Docker-–æ–±—Ä–∞–∑—ã** (–º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞, Alpine-–≤–µ—Ä—Å–∏–∏)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`restart: always`)

### –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
| –ü—Ä–æ–∫—Å–∏    | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å                          | –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞                     |
|-----------|--------------------------------------|---------------------------------|
| Nginx     | –ü–µ—Ä–µ–¥–∞—á–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö IP-–∞–¥—Ä–µ—Å–æ–≤       | `proxy_set_header X-Real-IP`    |
| Apache    | –ê–≤—Ç–æ–≤–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π                | `sed -i '/proxy_module/s/^#//'` |
| HAProxy   | –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏                | `balance roundrobin`            |

---
